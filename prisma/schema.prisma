generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  SUPERADMIN
  PEGAWAI
}

model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  role      Role     @default(PEGAWAI) // Default sebagai pegawai
  createdAt DateTime @default(now()) @map("dibuat_pada")

  @@map("admin")
}

model Usaha {
  id           String   @id @default(cuid())
  nama         String   @db.VarChar(255)
  namaPemilik  String   @db.VarChar(255) @map("nama_pemilik") // Kolom Baru
  sektor       String   @db.VarChar(100)
  status       String   @db.VarChar(50)
  latitude     Float
  longitude    Float
  kecamatan    String   @db.VarChar(100)
  desa         String   @db.VarChar(100)
  nomerTelp    String   @db.VarChar(20) @map("nomer_telp")
  email        String   @db.VarChar(255)
  deskripsi    String?  @db.Text
  gambar       String?  @db.VarChar(500)
  investasi    BigInt?  @map("investasi")
  tahunBerdiri Int?     @map("tahun_berdiri")
  createdAt    DateTime @default(now()) @map("dibuat_pada")
  updatedAt    DateTime @updatedAt @map("diupdate_pada")

  @@map("usaha")
}
model Wilayah {
  id            String   @id @default(cuid())
  kecamatan     String   @db.VarChar(100)
  desa          String   @db.VarChar(100)
  latitude      Float
  longitude     Float
  statusRdtr    String   @db.VarChar(20) @map("status_rdtr")
  usahaSesuai   String   @db.LongText @map("usaha_sesuai")
  perluKajian   String   @db.LongText @map("perlu_kajian")
  catatanRisiko String?  @db.LongText @map("catatan_risiko")
  estimasiBiaya String?  @db.LongText @map("estimasi_biaya")
  estimasiWaktu String?  @db.LongText @map("estimasi_waktu")
  gambarRdtr    String?  @db.VarChar(500) @map("gambar_rdtr")
  createdAt     DateTime @default(now()) @map("dibuat_pada")
  updatedAt     DateTime @updatedAt @map("diupdate_pada")

  @@unique([kecamatan, desa])
  @@map("wilayah")
}
